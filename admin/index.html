<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>后台管理系统 - 我们的小宇宙</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js"></script>
</head>
<body>
    <!-- 登录页面 -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <h1 class="login-title">后台管理</h1>
            <div class="login-form">
                <div class="form-group">
                    <label for="email">邮箱</label>
                    <input type="email" id="email" placeholder="请输入管理员邮箱">
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" placeholder="请输入密码">
                </div>
                <button id="loginBtn" class="login-btn">登录</button>
                <div id="loginError" class="login-error"></div>
            </div>
        </div>
    </div>

    <!-- 管理页面 -->
    <div id="adminPage" class="admin-page" style="display: none;">
        <!-- 导航栏 -->
        <nav class="admin-nav">
            <div class="nav-brand">
                <h2>管理后台</h2>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-tab="timeline">爱情故事</button>
                <button class="nav-btn" data-tab="gallery">相册管理</button>
                <button class="nav-btn" data-tab="messages">留言管理</button>
                <button class="nav-btn" data-tab="timer">恋爱计时器</button>
                <button id="logoutBtn" class="logout-btn">登出</button>
            </div>
        </nav>

        <!-- 主要内容 -->
        <main class="admin-main">
            <!-- 爱情故事时间轴 -->
            <section id="timelineTab" class="tab-content active">
                <div class="tab-header">
                    <h2>爱情故事时间轴</h2>
                    <button id="addTimelineBtn" class="add-btn">+ 添加时间点</button>
                </div>
                <div id="timelineList" class="timeline-list"></div>
            </section>

            <!-- 相册管理 -->
            <section id="galleryTab" class="tab-content">
                <div class="tab-header">
                    <h2>相册管理</h2>
                    <div class="upload-section">
                        <input type="file" id="photoFile" accept="image/*" multiple>
                        <button id="uploadBtn" class="upload-btn">上传图片</button>
                    </div>
                </div>
                <div id="galleryList" class="gallery-list"></div>
            </section>

            <!-- 留言管理 -->
            <section id="messagesTab" class="tab-content">
                <div class="tab-header">
                    <h2>留言管理</h2>
                </div>
                <div id="messagesList" class="messages-list"></div>
            </section>

            <!-- 恋爱计时器 -->
            <section id="timerTab" class="tab-content">
                <div class="tab-header">
                    <h2>恋爱计时器设置</h2>
                </div>
                <div class="timer-setting">
                    <div class="form-group">
                        <label for="startDate">恋爱开始日期</label>
                        <input type="date" id="startDate">
                    </div>
                    <button id="saveTimerBtn" class="save-btn">保存设置</button>
                    <div id="timerDisplay" class="timer-display"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- 添加/编辑时间点模态框 -->
    <div id="timelineModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeTimelineModal">&times;</span>
            <h3 id="modalTitle">添加时间点</h3>
            <form id="timelineForm">
                <input type="hidden" id="timelineId">
                <div class="form-group">
                    <label for="timelineDate">日期</label>
                    <input type="date" id="timelineDate" required>
                </div>
                <div class="form-group">
                    <label for="timelineTitle">标题</label>
                    <input type="text" id="timelineTitle" placeholder="事件标题" required>
                </div>
                <div class="form-group">
                    <label for="timelineDesc">描述</label>
                    <textarea id="timelineDesc" placeholder="事件描述" rows="4" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="submit-btn">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="firebase.js"></script>
    <script src="admin.js"></script>
</body>
</html>